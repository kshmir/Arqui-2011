cd bin

nasm -f aout ../src/libasm.asm -o libasm.o
nasm -f aout ../src/kstart.asm -o kstart.o
nasm -f aout ../src/loader.asm -o kstart.o

if [[ $(uname) =~ "Darwin" ]]; then
    export GCC_PATH=/Users/cristian/Downloads/bin
    $GCC_PATH/i386-aout-linux-gcc -c ../src/kernel.c -o kernel.o -fno-builtin
    $GCC_PATH/i386-aout-linux-gcc -c ../src/libc.c  -o libc.o -fno-builtin
    $GCC_PATH/i386-aout-linux-ld -T ../src/link.ld -o kernel.bin kernel.o kstart.o libc.o libasm.oi
else
    gcc -c ../src/kernel.c -o kernel.o -fno-builtin
    gcc -c ../src/libc.c  -o libc.o -fno-builtin
    ld -T ../src/link.ld -o kernel.bin kernel.o kstart.o libc.o libasm.oi
fi

echo "Compila end"
